(this["webpackJsonpeit-pos-front-end"]=this["webpackJsonpeit-pos-front-end"]||[]).push([[8],{321:function(e,t,a){"use strict";var n=a(1),c=a(31),r=a(2),o=a(0),l=(a(6),a(3)),i=a(123),d=a(55),s=a(5),u=a(281),m=o.forwardRef((function(e,t){var a=e.autoFocus,s=e.checked,m=e.checkedIcon,b=e.classes,f=e.className,p=e.defaultChecked,h=e.disabled,O=e.icon,v=e.id,j=e.inputProps,g=e.inputRef,y=e.name,k=e.onBlur,C=e.onChange,E=e.onFocus,x=e.readOnly,I=e.required,N=e.tabIndex,S=e.type,w=e.value,P=Object(r.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),R=Object(i.a)({controlled:s,default:Boolean(p),name:"SwitchBase",state:"checked"}),B=Object(c.a)(R,2),F=B[0],z=B[1],$=Object(d.a)(),q=h;$&&"undefined"===typeof q&&(q=$.disabled);var D="checkbox"===S||"radio"===S;return o.createElement(u.a,Object(n.a)({component:"span",className:Object(l.a)(b.root,f,F&&b.checked,q&&b.disabled),disabled:q,tabIndex:null,role:void 0,onFocus:function(e){E&&E(e),$&&$.onFocus&&$.onFocus(e)},onBlur:function(e){k&&k(e),$&&$.onBlur&&$.onBlur(e)},ref:t},P),o.createElement("input",Object(n.a)({autoFocus:a,checked:s,defaultChecked:p,className:b.input,disabled:q,id:D&&v,name:y,onChange:function(e){var t=e.target.checked;z(t),C&&C(e,t)},readOnly:x,ref:g,required:I,tabIndex:N,type:S,value:w},j)),F?m:O)}));t.a=Object(s.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(m)},324:function(e,t,a){"use strict";var n=a(0),c=n.createContext();t.a=c},335:function(e,t,a){"use strict";var n=a(1),c=a(2),r=a(0),o=(a(6),a(3)),l=a(55),i=a(5),d=a(110),s=a(9),u=r.forwardRef((function(e,t){e.checked;var a=e.classes,i=e.className,u=e.control,m=e.disabled,b=(e.inputRef,e.label),f=e.labelPlacement,p=void 0===f?"end":f,h=(e.name,e.onChange,e.value,Object(c.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),O=Object(l.a)(),v=m;"undefined"===typeof v&&"undefined"!==typeof u.props.disabled&&(v=u.props.disabled),"undefined"===typeof v&&O&&(v=O.disabled);var j={disabled:v};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof u.props[t]&&"undefined"!==typeof e[t]&&(j[t]=e[t])})),r.createElement("label",Object(n.a)({className:Object(o.a)(a.root,i,"end"!==p&&a["labelPlacement".concat(Object(s.a)(p))],v&&a.disabled),ref:t},h),r.cloneElement(u,j),r.createElement(d.a,{component:"span",className:Object(o.a)(a.label,v&&a.disabled)},b))}));t.a=Object(i.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(u)},341:function(e,t,a){"use strict";var n=a(1),c=a(2),r=a(0),o=(a(6),a(3)),l=a(321),i=a(41),d=Object(i.a)(r.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),s=Object(i.a)(r.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),u=a(5);var m=Object(u.a)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,a=e.classes,n=e.fontSize;return r.createElement("div",{className:Object(o.a)(a.root,t&&a.checked)},r.createElement(d,{fontSize:n}),r.createElement(s,{fontSize:n,className:a.layer}))})),b=a(16),f=a(9),p=a(53),h=a(324);var O=r.createElement(m,{checked:!0}),v=r.createElement(m,null),j=r.forwardRef((function(e,t){var a=e.checked,i=e.classes,d=e.color,s=void 0===d?"secondary":d,u=e.name,m=e.onChange,b=e.size,j=void 0===b?"medium":b,g=Object(c.a)(e,["checked","classes","color","name","onChange","size"]),y=r.useContext(h.a),k=a,C=Object(p.a)(m,y&&y.onChange),E=u;return y&&("undefined"===typeof k&&(k=y.value===e.value),"undefined"===typeof E&&(E=y.name)),r.createElement(l.a,Object(n.a)({color:s,type:"radio",icon:r.cloneElement(v,{fontSize:"small"===j?"small":"default"}),checkedIcon:r.cloneElement(O,{fontSize:"small"===j?"small":"default"}),classes:{root:Object(o.a)(i.root,i["color".concat(Object(f.a)(s))]),checked:i.checked,disabled:i.disabled},name:E,checked:k,onChange:C,ref:t},g))}));t.a=Object(u.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(b.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(b.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(j)},342:function(e,t,a){"use strict";var n=a(1),c=a(31),r=a(2),o=a(0),l=(a(6),a(3)),i=a(5),d=o.forwardRef((function(e,t){var a=e.classes,c=e.className,i=e.row,d=void 0!==i&&i,s=Object(r.a)(e,["classes","className","row"]);return o.createElement("div",Object(n.a)({className:Object(l.a)(a.root,c,d&&a.row),ref:t},s))})),s=Object(i.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(d),u=a(18),m=a(123),b=a(324),f=a(243),p=o.forwardRef((function(e,t){var a=e.actions,l=e.children,i=e.name,d=e.value,p=e.onChange,h=Object(r.a)(e,["actions","children","name","value","onChange"]),O=o.useRef(null),v=Object(m.a)({controlled:d,default:e.defaultValue,name:"RadioGroup"}),j=Object(c.a)(v,2),g=j[0],y=j[1];o.useImperativeHandle(a,(function(){return{focus:function(){var e=O.current.querySelector("input:not(:disabled):checked");e||(e=O.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var k=Object(u.a)(t,O),C=Object(f.a)(i);return o.createElement(b.a.Provider,{value:{name:C,onChange:function(e){y(e.target.value),p&&p(e,e.target.value)},value:g}},o.createElement(s,Object(n.a)({role:"radiogroup",ref:k},h),l))}));t.a=p},347:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),r=a(7),o=a(14),l=a(0),i=a.n(l),d=a(15),s=a(65),u=a(30),m=a(64),b=a(97),f=a(17),p=a(279),h=a(342),O=a(335),v=a(341),j=a(300),g=a(282),y=a(66),k=a.n(y),C=a(45),E=function(e){return e.itemFilter},x=Object(C.a)(E,(function(e){return e.searchValue})),I=Object(C.a)(E,(function(e){return e.searchType})),N=Object(C.a)(E,(function(e){return e.isBranded})),S=a(12),w=function(){var e=Object(d.c)(),t=Object(l.useState)("item code"),a=Object(o.a)(t,2),n=a[0],c=a[1],r=Object(d.d)(x),s=Object(d.d)(I);return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{container:!0,spacing:3},i.a.createElement(p.a,{item:!0,xs:2},i.a.createElement(h.a,{name:"itemSearchFilter",defaultValue:"itemCode",value:s,onChange:function(t){var a;e((a=t.target.value,function(e){return e({type:S.u,payload:a})})),c(t.target.name)}},i.a.createElement(O.a,{value:"itemStatId",label:"Id",name:"itemStatId",control:i.a.createElement(v.a,{color:"primary"}),labelPlacement:"end"}),i.a.createElement(O.a,{value:"itemCode",label:"Item Code",name:"item code",control:i.a.createElement(v.a,{color:"primary"}),labelPlacement:"end"}),i.a.createElement(O.a,{value:"itemName",name:"item name",label:"Item Name",control:i.a.createElement(v.a,{color:"primary"}),labelPlacement:"end"}))),i.a.createElement(j.a,{m:"auto",width:"50%"},i.a.createElement(p.a,{item:!0,xs:9},i.a.createElement(g.a,{autoFocus:!0,fullWidth:!0,label:"Enter an ".concat(n," to search"),variant:"outlined",value:r,onChange:function(t){var a;e((a=t.target.value,function(e){return e({type:S.v,payload:a})}))},InputProps:{startAdornment:i.a.createElement(k.a,null)}}))),i.a.createElement(j.a,{mt:"auto",mb:"auto",width:"30%",mx:"auto"})))},P=a(95),R=a(127),B=a(21),F=a(19),z=function(e){return e.item},$=Object(C.a)(z,(function(e){return e.itemList})),q=Object(C.a)(z,(function(e){return e.formattedItemList})),D=function(e){return function(t){return t({type:S.m,payload:e})}},A=a(120);t.default=function(){var e=Object(u.g)(),t=e.location,a=e.push,n=Object(d.d)($),p=Object(d.d)(q),h=Object(d.c)(),O=Object(d.d)(x),v=Object(d.d)(I),j=Object(d.d)(N),g=Object(l.useState)(!1),y=Object(o.a)(g,2),k=y[0],C=y[1],E=Object(l.useState)({}),z=Object(o.a)(E,2),L=z[0],M=z[1],U=Object(l.useState)(),V=Object(o.a)(U,2),H=V[0],T=V[1],W=Object(f.a)(),G=Object(l.useCallback)((function(e){h(Object(B.a)(!1));var t,a=[];Array.isArray(e.data)&&e.data.length?(h(D(e.data)),e.data.forEach((function(e){var t=e.id,n=e.itemCode,c=e.itemName,r=e.itemStats,o=e.supplier;r.length?r.forEach((function(e){var t=e.id,r=e.costPrice,l=e.salesPrice,i=e.quantity,d=e.createdAt;a.push({itemStatId:t,date:Object(R.b)(d),itemCode:n,itemName:c,qty:i,companyName:o?o.companyName:"Branded",costPrice:r,sellingPrice:l})})):a.push({id:t,date:"-",itemCode:n,itemName:c,qty:"-",companyName:o?o.companyName:"-",costPrice:"-",sellingPrice:"-"})}))):F.b.info("Oh! No ".concat(j?"Branded":""," items found for the ").concat("itemName"===v?"Item Name":"Item Code"," ").concat(O),{autoClose:3e3}),h((t=a,function(e){return e({type:S.k,payload:t})}))}),[h,j,v,O]),J=Object(l.useCallback)((function(e){console.log(e),h(D([])),F.b.error("Unable to get Items"),h(Object(B.a)(!1))}),[h]),Z=function(){h(Object(B.a)(!0)),Object(b.d)(v,O.trim(),j).then(G).catch(J)};Object(l.useEffect)((function(){n.length,Z()}),[j,v,O]);var K=function(e){e.data&&T(e.data.totalStockValue)},Q=function(){F.b.error("Unable to retrieve total stock")};Object(l.useEffect)((function(){h(Object(B.a)(!0)),Object(b.e)().then(K).catch(Q).finally(h(Object(B.a)(!1)))}),[h,p]);var X=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L.itemStatId){e.next=15;break}return e.prev=1,h(Object(B.a)(!0)),e.next=5,Object(b.c)(L.itemStatId);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),F.b.error("Unable to delete this row");case 10:return e.prev=10,h(Object(B.a)(!1)),e.finish(10);case 13:e.next=27;break;case 15:return e.prev=15,h(Object(B.a)(!0)),e.next=19,Object(b.b)(L.id);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(15),F.b.error("Unable to delete the item");case 24:return e.prev=24,h(Object(B.a)(!1)),e.finish(24);case 27:Y(),Z();case 29:case"end":return e.stop()}}),e,null,[[1,7,10,13],[15,21,24,27]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){C(!1),M({})};return i.a.createElement("div",{className:W.pageContainer},i.a.createElement(P.a,{title:"Items",createNewPath:"items"}),i.a.createElement(w,null),H&&i.a.createElement("center",null,"Current stock value Rs."," ",i.a.createElement("strong",null,H.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&, "))),i.a.createElement(s.a,{tableData:p,tableHeaders:m.f,handleEdit:function(e){return function(){console.log(e);var c=n.filter((function(t){return t.itemStats.find((function(t){return t.id===e.itemStatId}))}));c.length&&a({pathname:"".concat(t.pathname,"/edit/").concat(c[0].id),state:{editingItem:c[0]}})}},handleDelete:function(e){return function(){C(!0),M(e)}},densed:!0}),k&&i.a.createElement(A.a,{open:k,close:Y,handleAgree:X,id:"deletePopup",header:"Confirm Delete",content:"Are you sure want to delete this ".concat(L.itemStatId?"row?":"item?")}))}}}]);
//# sourceMappingURL=8.9375d9a8.chunk.js.map
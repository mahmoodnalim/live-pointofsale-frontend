(this["webpackJsonpeit-pos-front-end"]=this["webpackJsonpeit-pos-front-end"]||[]).push([[9],{313:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(122),c=a(36),l=a(299);t.a=function(e){var t=e.entry,a=e.handleDatePickerChange,n=e.selectedDate,i=t.name,u=t.id;return r.a.createElement(c.a,{utils:o.a},r.a.createElement(l.a,{margin:"medium",id:u,name:i,format:" yyyy / MM / dd",value:n,onChange:a}))}},314:function(e,t,a){"use strict";var n=a(42),r=a(8),o=a(14),c=a(0),l=a.n(c),i=a(30),u=a(110),s=a(279),d=a(282),m=a(295),p=function(e){var t=e.entry,a=e.getValue,n=t.label,r=t.name,i=t.icon,u=t.type,p=t.required,b=t.autoFocus,f=t.value,h=t.multiline,g=t.rows,v=t.id,y=t.helperText,O=t.error,E=t.readOnly,j=Object(c.useState)(f),k=Object(o.a)(j,2),x=k[0],C=k[1];return l.a.createElement(s.a,{item:!0,xs:6},l.a.createElement(d.a,{fullWidth:!0,id:v,label:n,placeholder:n,name:r,type:u,required:p,autoFocus:b,value:x,multiline:h,rows:g,onChange:function(e){C(e.target.value),"function"===typeof a&&a(e.target.name,e.target.value)},error:O,helperText:O&&y,variant:"outlined",InputProps:{startAdornment:l.a.createElement(m.a,{position:"start"},i),readOnly:E}}))},b=a(3),f=a(220),h=a(341),g=a(342),v=a(335),y=a(227),O=Object(f.a)((function(e){return{root:{"&:hover":{backgroundColor:"transparent",display:"flex",flexWrap:"wrap"}},icon:{borderRadius:"50%",width:16,height:16,boxShadow:"inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)",backgroundColor:"#f5f8fa",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))","$root.Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"#ebf1f5"},"input:disabled ~ &":{boxShadow:"none",background:"rgba(206,217,224,.5)"}},checkedIcon:{backgroundColor:"#137cbd",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:16,height:16,backgroundImage:"radial-gradient(#fff,#fff 28%,transparent 32%)",content:'""'},"input:hover ~ &":{backgroundColor:"#106ba3"}}}}));function E(e){var t=O();return l.a.createElement(h.a,Object.assign({className:t.root,disableRipple:!0,color:"default",checkedIcon:l.a.createElement("span",{className:Object(b.a)(t.icon,t.checkedIcon)}),icon:l.a.createElement("span",{className:t.icon})},e))}var j=function(e){var t=e.entry,a=e.getValue,n=t.value,r=t.name,i=t.label,u=t.values,d=Object(c.useState)(n),m=Object(o.a)(d,2),p=m[0],b=m[1];return l.a.createElement(s.a,{item:!0,xs:6},l.a.createElement(y.a,{component:"legend"},i),l.a.createElement(g.a,{row:!0,defaultValue:u[0].toLowerCase(),value:p,name:r,onChange:function(e){b(e.target.value),"function"===typeof a&&a(e.target.name,e.target.value)}},l.a.createElement(v.a,{value:u[0].toLowerCase(),control:l.a.createElement(E,null),label:u[0]}),l.a.createElement(v.a,{value:u[1].toLowerCase(),control:l.a.createElement(E,null),label:u[1]})))},k=a(306),x=a(167),C=a(17),w=a(325),N=a.n(w),D=function(e){var t=e.entry,a=e.getValue;console.log(t);var n=t.alt,r=t.value,i=Object(C.a)(),u=Object(c.useState)(r),d=Object(o.a)(u,2),m=d[0],p=d[1];return l.a.createElement(s.a,{xs:12},l.a.createElement("div",{className:i.customAvatarRoot},l.a.createElement(k.a,{alt:n,src:m,className:i.customAvatarStyles}),l.a.createElement("input",{accept:"image/*",className:i.customAvatarInput,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){console.log(e.target.name),console.log(e),a("logo",URL.createObjectURL(e.target.files[0])),p(URL.createObjectURL(e.target.files[0]))}}),l.a.createElement("label",{className:i.customAvatarButton,htmlFor:"contained-button-file"},l.a.createElement(x.a,{variant:"contained",color:"primary",size:"small",component:"span",startIcon:l.a.createElement(N.a,null)},"Upload"))))},S=a(285),I=a(300),T=a(121),V=a.n(T),R=a(313),A=a(20),B=a(225),q=a(226),F=a(233),L=a(223),M=a(311),P=a(308),U=a(228),z=a(238),W=function(e){var t=e.entry,a=e.getValue,n=t.value,r=t.name,c=t.id,i=t.label,u=t.helperText,d=t.error,m=l.a.useState([]),p=Object(o.a)(m,2),b=p[0],f=p[1],h=Object(C.a)(),g=(Object(z.a)(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return b.reduce((function(e,t){return e+t.amount}),e)});return l.a.createElement(s.a,{item:!0,xs:6},l.a.createElement(B.a,{className:h.dropdownControl},l.a.createElement(q.a,{id:i},"Due"),l.a.createElement(F.a,{labelId:i,id:c,value:b,onChange:function(e){var t=-1;b.forEach((function(a,n){a.id===e.target.value.id&&(t=n)})),console.log(t),t<0?(f([].concat(Object(A.a)(b),[e.target.value])),e.target.value=g(e.target.value.amount)):(b.splice(t,1),f(Object(A.a)(b)),e.target.value=g()),"function"===typeof a&&a(e.target.name,e.target.value)},input:l.a.createElement(L.a,{id:"Select due"}),name:r,renderValue:function(e){return l.a.createElement("div",{className:h.dropdownChips},e.map((function(e){return l.a.createElement(M.a,{key:e.id,label:"Rs. ".concat(parseFloat(e.total).toFixed(2))})})))}},n.map((function(e){return l.a.createElement(P.a,{key:c,value:e,style:(t=e.id,{fontWeight:b.filter((function(e){return e.id===t})).length?"bold":"normal"})},"pay due Rs. ".concat(parseFloat(e.amount).toFixed(2)," on ").concat(new Date(e.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric"})));var t}))),d&&l.a.createElement(U.a,{error:!0},u)))},$=a(337),_=Object(f.a)((function(e){return{root:{padding:7,margin:e.spacing(1)},thumb:{width:24,height:24,backgroundColor:"#fff",boxShadow:"0 0 12px 0 rgba(0,0,0,0.08), 0 0 8px 0 rgba(0,0,0,0.12), 0 0 4px 0 rgba(0,0,0,0.38)"},switchBase:{color:"rgba(0,0,0,0.38)",padding:7},track:{borderRadius:20,backgroundColor:"#90a4ae"},checked:{"& $thumb":{backgroundColor:"#fff"},"& + $track":{opacity:"1 !important"}}}})),H=function(e){var t=e.entry,a=e.getValue,n=t.name,r=t.label,c=t.checked,i=l.a.useState(c),u=Object(o.a)(i,2),d=u[0],m=u[1],p=_();return l.a.createElement(s.a,{item:!0,xs:6},l.a.createElement(y.a,{component:"legend"},r),l.a.createElement($.a,{defaultChecked:!1,color:"primary",classes:p,checked:d,name:n,onChange:function(e){m(e.target.checked),"function"===typeof a&&a(e.target.name,e.target.checked)}}))},J=a(120),Y=a(29),G=function(e){var t=e.entry,a=e.getValue,n=e.hidden,r=t.values,c=t.name,i=t.id,u=t.label,d=t.helperText,m=t.error,p=Object(C.a)(),b=l.a.useState(r[0].value),f=Object(o.a)(b,2),h=f[0],g=f[1];return n?null:l.a.createElement(s.a,{item:!0,xs:6},l.a.createElement(B.a,{className:p.dropdownControl},l.a.createElement(q.a,{id:u},u),l.a.createElement(F.a,{labelId:u,id:i,value:h,onChange:function(e){"function"===typeof a&&(a(e.target.name,e.target.value),g(e.target.value))},name:c},r.map((function(e){var t=e.key,a=e.value;return l.a.createElement(P.a,{key:t,value:t},a)}))),m&&l.a.createElement(U.a,{error:!0},d)))},K=a(96),Q=a.n(K);t.a=function(e){var t=e.title,a=(e.topUis,e.buttonName),d=void 0===a?"Submit":a,m=e.data,b=void 0===m?[]:m,f=e.onClick,h=e.actor,g=void 0===h?{}:h,v=e.handleDelete,y=e.hideDeleteButton,O=e.handleDatePickerChange;console.log(b);var E=Object(c.useState)(Object(r.a)({},g)),k=Object(o.a)(E,2),w=k[0],N=k[1],T=Object(c.useState)(),A=Object(o.a)(T,2),B=A[0],q=A[1],F=l.a.useState(!1),L=Object(o.a)(F,2),M=L[0],P=L[1],U=function(e,t){N(Object(r.a)(Object(r.a)({},w),{},Object(n.a)({},e,t))),console.log(Object(r.a)(Object(r.a)({},w),{},Object(n.a)({},e,t)))},z=Object(i.g)(),$=Object(C.a)(),_=b;return B&&(_=B),l.a.createElement(S.a,{component:"main",maxWidth:"md"},l.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){z.goBack()},className:$.backButton},l.a.createElement(Q.a,null)),l.a.createElement(u.a,{component:"h1",variant:"h5"},l.a.createElement(I.a,{lineHeight:2},l.a.createElement(V.a,{className:$.formbuilderMargin}),t)),l.a.createElement("div",null,l.a.createElement("form",{className:$.formbuilderForm},l.a.createElement(s.a,{container:!0,spacing:3},_.map((function(e){switch(e.type){case"text":case"email":case"tel":case"number":return l.a.createElement(p,{entry:e,key:e.label,getValue:U});case"date":return l.a.createElement(R.a,{entry:e,handleDatePickerChange:O});case"radio":return l.a.createElement(j,{entry:e,key:e.label,getValue:U});case"customDropdown":return l.a.createElement(G,{entry:e,key:e.label,getValue:U,hidden:"supplierId"===e.id&&"branded"===w.itemType});case"dropdown":case"amount":return l.a.createElement(W,{entry:e,key:e.label,getValue:U});case"avatar":return l.a.createElement(D,{entry:e,getValue:U});case"switch":return l.a.createElement(H,{entry:e,getValue:U,key:e.name});default:return null}}))),l.a.createElement(x.a,{type:"submit",variant:"contained",color:"primary",onClick:function(e){console.log(w),e.preventDefault();var t=[];b.forEach((function(e){var a=w["".concat(e.id)];"email"===e.type?function(e,t,a){e.required||t?Y.e.test(t)?a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!0,helperText:"Email is not in valid format"})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1}))}(e,a,t):"tel"===e.type?function(e,t,a){e.required||t?Y.f.test(t)?a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!0,helperText:"Please enter a valid phone number"})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1}))}(e,a,t):function(e,t,a){e.required?t?a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!0,helperText:"".concat(e.label," is required")})):a.push(Object(r.a)(Object(r.a)({},e),{},{error:!1}))}(e,a,t)})),q(t);var a=t.filter((function(e){return e.error}));a.length?(console.log("Form validation error"),console.log(a)):f(w,g.id)},className:$.formbuilderSubmit},d),g.id&&!y&&l.a.createElement(x.a,{variant:"contained",color:"secondary",onClick:function(){P(!0)}},"Delete"))),M&&l.a.createElement(J.a,{open:M,close:function(){P(!1)},handleAgree:v,id:"deletePopup",header:"Confirm Delete",content:"Are you sure want to delete the ".concat(g.firstName?"".concat(g.firstName," ").concat(g.lastName):g.itemName)}))}},320:function(e,t,a){"use strict";var n=a(37);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),o=(0,n(a(39)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"}),"MonetizationOn");t.default=o},334:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a(4),r=a.n(n),o=a(7),c=a(13);function l(){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/cashbooks",{limit:20});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/cashbooks?startDate=".concat(t,"&endDate=").concat(a),{limit:20});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("./cashbooks",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},348:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(14),o=a(0),c=a.n(o),l=a(15),i=a(30),u=a(314),s=a(38),d=a(320),m=a.n(d),p=[{id:"refNo",type:"text",label:"Ref. No",name:"refNo",required:!0},{id:"amount",name:"amount",type:"number",label:"Amount",required:!0,icon:c.a.createElement(m.a,null)},{id:"description",type:"text",label:"Description",name:"description",multiline:!0,rows:4,required:!0}],b=[{id:"id",type:"text",label:"Customer ID",name:"id",readOnly:!0},{id:"firstName",name:"firstName",type:"text",label:"First Name",readOnly:!0},{id:"lastName",name:"lastName",type:"text",label:"Last Name",readOnly:!0},{id:"amount",type:"dropdown",label:"Due amount",name:"amount",required:!0,multiple:!0}],f=a(334),h=a(10),g=a(21),v=a(1),y=a(2),O=(a(6),a(3)),E=a(5),j=a(9),k=a(166),x=o.forwardRef((function(e,t){var a=e.classes,n=e.className,r=e.color,c=void 0===r?"primary":r,l=e.position,i=void 0===l?"fixed":l,u=Object(y.a)(e,["classes","className","color","position"]);return o.createElement(k.a,Object(v.a)({square:!0,component:"header",elevation:4,className:Object(O.a)(a.root,a["position".concat(Object(j.a)(i))],a["color".concat(Object(j.a)(c))],n,"fixed"===i&&"mui-fixed"),ref:t},u))})),C=Object(E.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(x),w=a(302),N=a(297),D=a(4),S=a.n(D),I=a(7),T=a(13);function V(){return(V=Object(I.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("due/search-by-customer-id/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=a(125),A=a(98),B=a(300),q=a(110),F=function(e){var t=e.children,a=e.value,n=e.index,r=Object(A.a)(e,["children","value","index"]);return c.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n)},r),a===n&&c.a.createElement(B.a,{p:3},c.a.createElement(q.a,null,t)))},L=a(19),M={fetchApi:g.a};t.default=Object(l.b)((function(e){var t=e.global;return Object(n.a)({},t)}),M)((function(e){var t=e.fetchApi,a=Object(i.i)().customerId,l=Object(i.g)().push,d=Object(o.useState)({type:"DEBIT",refNo:1,description:"DUE_PAYMENT",amount:0}),m=Object(r.a)(d,2),g=m[0],v=m[1],y=Object(s.a)(),O=c.a.useState("DEBIT"),E=Object(r.a)(O,2),j=E[0],k=E[1],x=Object(o.useState)([]),D=Object(r.a)(x,2),S=D[0],I=D[1];Object(o.useEffect)((function(){if(a){var e=function(e,a){var r=Object(n.a)(Object(n.a)({},e.data),{},{amount:a.data});t(!1);var o=[];Object.keys(r).forEach((function(e){b.forEach((function(t){return e===t.id&&o.push(Object(n.a)(Object(n.a)({},t),{},{value:r["".concat(e)]})),null}))})),I([].concat(o))},r=function(){t(!1)};t(!0),function(e){return V.apply(this,arguments)}(a).then((function(t){Object(R.c)(a).then((function(a){return e(a,t)})).catch(r)})).catch((function(){t(!1)}))}}),[a,t]);var T=Object(n.a)({},g),A=c.a.createElement(u.a,{title:"Create new Cashbook",data:a&&"DEBIT"===j?S:p,onClick:function(e){t(!0),Object(f.a)(e).then((function(){t(!1),l(h.a.cashbooks),L.b.success("Succuessfully created")})).catch((function(e){t(!1),L.b.error("Unable to create cashbook")}))},actor:T});return a?A:c.a.createElement("div",null,c.a.createElement(C,{position:"static",color:"default"},c.a.createElement(w.a,{value:j,onChange:function(e,t){k(t),v(Object(n.a)(Object(n.a)({},g),{},{type:t}))},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},c.a.createElement(N.a,{label:"Debit",value:"DEBIT"}),c.a.createElement(N.a,{label:"Credit",value:"CREDIT"}))),c.a.createElement("div",null,c.a.createElement(F,{value:j,index:"CREDIT",dir:y.direction},A),c.a.createElement(F,{value:j,index:"DEBIT",dir:y.direction},A)))}))}}]);
//# sourceMappingURL=9.a3190e29.chunk.js.map